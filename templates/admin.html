<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BTS Admin — Threshold Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="icon" type="image/x-icon" href="/static/img/logo.png" />
</head>

<body class="admin-page">
  <div class="admin-container">

    <!-- Topbar -->
    <header class="topbar">
      <div class="brand">
        <div class="logos">
            <img src="/static/img/cylogo.png" alt="Logocy" class="logo" />
            <img src="/static/img/logo.svg" alt="Logocy" class="logo" />
        </div>
      </div>
      <h1 class="title">Admin — Threshold Configuration</h1>
      <div class="topbar-actions">
        <a href="/dashboard" class="btn btn-ghost">← Back to Dashboard</a>
      </div>
    </header>

    <!-- Main content -->
    <main class="admin-main">

      <section class="admin-section glass-panel">
        <h2 class="section-title">Set Threshold Values</h2>
        <p class="section-desc">Adjust the limits for each parameter. </p>

        <!-- Threshold Form -->
        <form id="thresholdForm" class="threshold-form">
          <div class="threshold-tables-container">
            <!-- two different dropdown for selecting Model name and Test Type -->
            <div class="dropdowns">

              <label for="modelSelect">Model Name:</label>
              <select id="modelSelect" name="modelSelect">
              </select>

              <label for="testTypeSelect">Test Type:</label>
              <select id="testTypeSelect" name="testTypeSelect">
                <option value="CDC">CDC</option>
                <option value="Sanity">Sanity</option>
              </select>
            </div>
            <div class="tables">

              <div class="threshold-table">
                <h3>Charging Thresholds</h3>
              <!-- <h2>Step:              <span><input type="text" name="charge_step" required></span></h2>  -->
              
              <table class="threshold-table-data">
                <thead>
                  <tr>
                    <th>S.No</th>
                    <th>Parameter</th>
                    <th>Min</th>
                    <th>Max</th>
                    <th>Step</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>Cell Deviation</td>
                    <td><input type="number" step="0.1" name="charge_cell_deviation_min" placeholder="e.g. 5.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_cell_deviation_max" placeholder="e.g. 10.0" required /></td>
                    <td><input type="text" name="charge_cell_deviation_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>Capacity</td>
                    <td><input type="number" step="0.1" name="charge_capacity_min" placeholder="e.g. 50.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_capacity_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="charge_capacity_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>Pack Voltage</td>
                    <td><input type="number" step="0.1" name="charge_pack_voltage_min" placeholder="e.g. 200.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_pack_voltage_max" placeholder="e.g. 250.0" required /></td>
                  <td><input type="text" name="charge_pack_voltage_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>Max Cell Voltage</td>
                    <td><input type="number" step="0.1" name="charge_max_cell_voltage_min" placeholder="e.g. 4.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_max_cell_voltage_max" placeholder="e.g. 4.2" required /></td>
                  <td><input type="text" name="charge_max_cell_voltage_step" placeholder="e.g. 1 or 1-4" required /></td>
                  </tr>
                  <tr>
                    <td>5</td>
                    <td>Min Cell Voltage</td>
                    <td><input type="number" step="0.1" name="charge_min_cell_voltage_min" placeholder="e.g. 3.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_min_cell_voltage_max" placeholder="e.g. 3.2" required /></td>
                    <td><input type="text" name="charge_min_cell_voltage_step" placeholder="e.g. 1 or 1-4" required /></td>
                  </tr>
                  <tr>
                    <td>6</td>
                    <td>Max Cell Temperature</td>
                    <td><input type="number" step="0.1" name="charge_max_cell_temperature_min" placeholder="e.g. 45.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_max_cell_temperature_max" placeholder="e.g. 60.0" required /></td>
                    <td><input type="text" name="charge_max_cell_temperature_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>7</td>
                    <td>Min Cell Temperature</td>
                    <td><input type="number" step="0.1" name="charge_min_cell_temperature_min" placeholder="e.g. 10.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_min_cell_temperature_max" placeholder="e.g. 20.0" required /></td>
                    <td><input type="text" name="charge_min_cell_temperature_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>8</td>
                    <td>SOC</td>
                    <td><input type="number" step="0.1" name="charge_soc_min" placeholder="e.g. 20.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_soc_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="charge_soc_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>9</td>
                    <td>END SOC</td>
                    <td><input type="number" step="0.1" name="charge_end_soc_min" placeholder="e.g. 20.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_end_soc_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="charge_end_soc_step" placeholder="e.g. 1.0" required /></td>
                  </tr>

                  <tr>
                    <td>10</td>
                    <td>Temp Difference ∆T (Manual)</td>
                    <td><input type="number" step="0.1" name="charge_temperature_difference_min" placeholder="e.g. 5.0" required /></td>
                    <td><input type="number" step="0.1" name="charge_temperature_difference_max" placeholder="e.g. 15.0" required /></td>
                    <td><input type="text" name="charge_temperature_difference_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>11</td>
                    <td>HRC</td>
                    <td><input type="number" step="0.1" name="charge_hrc_min" placeholder="e.g. 0.5" required /></td>
                    <td><input type="number" step="0.1" name="charge_hrc_max" placeholder="e.g. 1.5" required /></td>
                    <td><input type="text" name="charge_hrc_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="threshold-table">
              <h3>Discharging Thresholds</h3>
              <!-- <h2>Step:              <span><input type="text" name="discharge_step" required></span></h2>  -->
              
              <table class="threshold-table-data">
                <thead>
                  <tr>
                    <th>S.No</th>
                    <th>Parameter</th>
                    <th>Min</th>
                    <th>Max</th>
                    <th>Step</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>Cell Deviation</td>
                    <td><input type="number" step="0.1" name="discharge_cell_deviation_min" placeholder="e.g. 5.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_cell_deviation_max" placeholder="e.g. 10.0" required /></td>
                    <td><input type="text" name="discharge_cell_deviation_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>Capacity</td>
                    <td><input type="number" step="0.1" name="discharge_capacity_min" placeholder="e.g. 50.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_capacity_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="discharge_capacity_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>Pack Voltage</td>
                    <td><input type="number" step="0.1" name="discharge_pack_voltage_min" placeholder="e.g. 200.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_pack_voltage_max" placeholder="e.g. 250.0" required /></td>
                    <td><input type="text" name="discharge_pack_voltage_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>Max Cell Voltage</td>
                    <td><input type="number" step="0.1" name="discharge_max_cell_voltage_min" placeholder="e.g. 4.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_max_cell_voltage_max" placeholder="e.g. 4.2" required /></td>
                    <td><input type="text" name="discharge_max_cell_voltage_step" placeholder="e.g. 1 or 1-4" required /></td>
                  </tr>
                  <tr>
                    <td>5</td>
                    <td>Min Cell Voltage</td>
                    <td><input type="number" step="0.1" name="discharge_min_cell_voltage_min" placeholder="e.g. 3.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_min_cell_voltage_max" placeholder="e.g. 3.2" required /></td>
                    <td><input type="text" name="discharge_min_cell_voltage_step" placeholder="e.g. 1 or 1-4" required /></td>
                  </tr>
                  <tr>
                    <td>6</td>
                    <td>Max Cell Temperature</td>
                    <td><input type="number" step="0.1" name="discharge_max_cell_temperature_min" placeholder="e.g. 45.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_max_cell_temperature_max" placeholder="e.g. 60.0" required /></td>
                    <td><input type="text" name="discharge_max_cell_temperature_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>7</td>
                    <td>Min Cell Temperature</td>
                    <td><input type="number" step="0.1" name="discharge_min_cell_temperature_min" placeholder="e.g. 10.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_min_cell_temperature_max" placeholder="e.g. 20.0" required /></td>
                    <td><input type="text" name="discharge_min_cell_temperature_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>8</td>
                    <td>SOC</td>
                    <td><input type="number" step="0.1" name="discharge_soc_min" placeholder="e.g. 20.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_soc_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="discharge_soc_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>9</td>
                    <td>END SOC</td>
                    <td><input type="number" step="0.1" name="discharge_end_soc_min" placeholder="e.g. 20.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_end_soc_max" placeholder="e.g. 100.0" required /></td>
                    <td><input type="text" name="discharge_end_soc_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>10</td>
                    <td>Temp Difference ∆T (Manual)</td>
                    <td><input type="number" step="0.1" name="discharge_temperature_difference_min" placeholder="e.g. 5.0" required /></td>
                    <td><input type="number" step="0.1" name="discharge_temperature_difference_max" placeholder="e.g. 15.0" required /></td>
                    <td><input type="text" name="discharge_temperature_difference_step" placeholder="e.g. 1.0" required /></td>
                  </tr>
                  <tr>
                    <td>11</td>
                    <td>HRD</td>
                    <td><input type="number" step="0.1" name="discharge_hrd_min" placeholder="e.g. 0.5" required /></td>
                    <td><input type="number" step="0.1" name="discharge_hrd_max" placeholder="e.g. 1.5" required /></td>
                    <td><input type="text" name="discharge_hrd_step" placeholder="e.g. 1 or 1-4" required /></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Thresholds</button>
            <button type="button" class="btn btn-ghost" id="resetDefaults">Reset Defaults</button>
          </div>
        </form>
      </section>

      <!-- Threshold JSON View (optional for admin clarity) -->
      <section class="admin-section glass-panel">
        <h2 class="section-title">Headers Adjustment</h2>
        <form id="headersForm" class="headers-form">
          <table class="headers-table-data">
            <thead>
              <tr>
                <th>S.No</th>
                <th>MIS Parameter</th>
                <th>Header Name</th>
                <th>Sheet Name/Number</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>Cell Deviation</td>
                <!-- checkbox with input 1 or 0  -->
                
                <td>
                  <input type="checkbox" id="non-standard" name="non-standard" value="1">
                  <label for="non-standard">non-standard</label><br>
                  <input type="text" name="header_cell_deviation" placeholder="e.g. Battery_voltage_difference(mV)" required /></td>
                <td><input type="text" name="header_sheet_name_cell_deviation" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>2</td>
                <td>Capacity</td>
                <td><input type="text" name="header_capacity" placeholder="e.g. Capacity(Ah)" required /></td>
                <td><input type="text" name="header_sheet_name_capacity" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>3</td>
                <td>Pack Voltage</td>
                <td><input type="text" name="header_pack_voltage" placeholder="e.g. Gathertotalvoltage(V)" required /></td>
                <td><input type="text" name="header_sheet_name_pack_voltage" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>4</td>
                <td>Max Cell Voltage</td>
                <td><input type="text" name="header_max_cell_voltage" placeholder="e.g. Maximumcellvoltagevalue(mV)" required /></td>
                <td><input type="text" name="header_sheet_name_max_cell_voltage" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>5</td>
                <td>Min Cell Voltage</td>
                <td><input type="text" name="header_min_cell_voltage" placeholder="e.g. Minimum_cell_voltage_value(mV)" required /></td>
                <td><input type="text" name="header_sheet_name_min_cell_voltage" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>6</td>
                <td>Max Cell Temperature</td>
                <td><input type="text" name="header_max_cell_temperature" placeholder="e.g. Maximum_temperature_value(??)" required /></td>
                <td><input type="text" name="header_sheet_name_max_cell_temperature" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>7</td>
                <td>Min Cell Temperature</td>
                <td><input type="text" name="header_min_cell_temperature" placeholder="e.g. Minimum_temperature_value(??)" required /></td>
                <td><input type="text" name="header_sheet_name_min_cell_temperature" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>8</td>
                <td>SOC</td>
                <td><input type="text" name="header_soc" placeholder="e.g. SOC(%)" required /></td>
                <td><input type="text" name="header_sheet_name_soc" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>9</td>
                <td>Temp Difference ∆T (Manual)</td>
                <td><input type="text" name="header_temperature_difference" placeholder="e.g. Temp Difference ∆T (Manual)" required /></td>
                <td><input type="text" name="header_sheet_name_temperature_difference" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>10</td>
                <td>END SOC</td>
                <td><input type="text" name="header_end_soc" placeholder="e.g. End SOC (%)" required /></td>
                <td><input type="text" name="header_sheet_name_end_soc" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>11</td>
                <td>HRC</td>
                <td><input type="text" name="header_hrc" placeholder="e.g. HRC" required /></td>
                <td><input type="text" name="header_sheet_name_hrc" placeholder="e.g. 0" required /></td>
              </tr>
              <tr>
                <td>12</td>
                <td>HRD</td>
                <td><input type="text" name="header_hrd" placeholder="e.g. HRD" required /></td>
                <td><input type="text" name="header_sheet_name_hrd" placeholder="e.g. 0" required /></td>
              </tr>
            </tbody>
          </table>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Headers</button>
            <button type="button" class="btn btn-ghost" id="resetHeadersDefaults">Reset Defaults</button>
          </div>
        </form>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>© 2025 BTS Monitoring System — Admin Panel</p>
    </footer>
  </div>

  <!-- JS includes -->
  <!-- External JS only (no inline scripts) -->
  <script src="/static/js/socket.io.min.js"></script>
  <script src="/static/js/main.js"></script>
  <script src="/static/js/websocket.js"></script>
  <script src="/static/js/admin.js"></script>
</body>
</html>
